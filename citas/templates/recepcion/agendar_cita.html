{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ titulo }}</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="icon" type="image/png" href="{% static 'citas/img/logo.png' %}">
<style>
    body {
        font-family: 'Roboto', sans-serif;
        background: #EAF2F8;
        margin: 0; padding: 0;
        color: #1C1C1C;
    }
    #header {
        background: linear-gradient(180deg, rgba(46,134,193,0.95) 0%, rgba(46,134,193,1) 100%);
        color: #FFF; padding: 15px 30px; height: 100px;
        display: flex; justify-content: space-between; align-items: center;
        box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }
    .logo-container { display: flex; align-items: center; }
    .logo { height: 80px; margin-right: 15px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }
    .logo-placeholder { display: none; width: 80px; height: 80px; background: #EAF2F8; align-items:center; justify-content:center; margin-right:15px; font-weight:bold; color:#2E86C1; border-radius:5px; }
    .hospital-name { color:white; font-size:22px; font-weight:bold; line-height:1.2; text-transform:uppercase; text-shadow:1px 1px 2px rgba(0,0,0,0.3); display:flex; flex-direction:column; justify-content:center; }
    .container { background:#AED6F1; border-radius:14px; padding:32px; max-width:500px; width:90%; margin:40px auto; text-align:center; box-shadow:0 10px 28px rgba(0,0,0,0.10); border:1px solid rgba(46,134,193,0.35); }
    h1 { font-size:24px; margin-bottom:6px; color:#1C1C1C; font-weight:700; }
    .subtitle { color:#5f6b7a; font-size:14px; margin-bottom:18px; }
    .icon { font-size:45px; color:#4A90E2; margin-bottom:10px; }
    form { text-align:left; }
    label { font-weight:600; display:block; margin-bottom:6px; }
    input, select { width:100%; padding:12px; border-radius:10px; border:1px solid rgba(46,134,193,0.55); font-size:14px; background-color:#EAF2F8; color:#1C1C1C; box-sizing:border-box; margin-bottom:10px; }
    input:focus, select:focus { border-color:#4A90E2; outline:none; box-shadow:0 0 0 0.2rem rgba(74,144,226,0.28); }
    button { background-color:#4A90E2; color:white; border:none; padding:14px 20px; border-radius:9999px; font-size:16px; cursor:pointer; width:100%; margin-top:10px; box-shadow:0 8px 18px rgba(74,144,226,0.20); }
    button:hover { background-color:#5DADE2; transform:translateY(-1px); box-shadow:0 12px 22px rgba(93,173,226,0.25); }
    .back-link { display:inline-block; margin-top:18px; color:#4A90E2; text-decoration:none; font-weight:bold; }
    .back-link i { margin-right:5px; }
    .back-link:hover { color:#5DADE2; text-decoration:underline; }
    .alert { padding:12px; background:#f8d7da; color:#842029; border-radius:8px; margin-bottom:15px; }
    .available-hours { margin-top:10px; background:#d1f2eb; padding:10px; border-radius:8px; color:#145a32; font-weight:600; }
</style>
</head>
<body>
<div id="header">
    <div class="logo-container">
        <img src="{% static 'citas/img/logo.png' %}" class="logo">
        <div class="logo-placeholder">HSP</div>
        <div class="hospital-name">Hospital<br>San Pedro</div>
    </div>
</div>

<div class="container">
    <div class="icon"><i class="fa-solid fa-calendar-plus"></i></div>
    <h1>{{ titulo }}</h1>

    <!-- Mensajes de error o Ã©xito -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert">{{ message }}</div>
        {% endfor %}
    {% endif %}

    <form method="POST">
        {% csrf_token %}
        {% if paciente %}
            <label>Paciente:</label>
            <input type="text" value="{{ paciente.nombre }} {{ paciente.apellidos }}" readonly>
            <input type="hidden" name="paciente" value="{{ paciente.id }}">
        {% endif %}

        <label>Doctor:</label>
        {{ form.doctor_user }}

        <label>Fecha:</label>
        {{ form.fecha }}

        <label>Hora:</label>
        {{ form.hora }}

        <label>Activar recordatorio:</label>
        {{ form.recordatorio_activado }}

        <label>Estado:</label>
        {{ form.estado }}

        <button type="submit"><i class="fas fa-save"></i> {{ boton }}</button>
    </form>

    <!-- Mostrar horas disponibles -->
    {% if horas_disponibles %}
        <div class="available-hours">
            <strong>Horas disponibles:</strong>
            {% for hora in horas_disponibles %}
                {{ hora }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
        </div>
    {% endif %}

    <a href="{% url 'dashboard_administradora' %}" class="back-link"><i class="fa-solid fa-arrow-left"></i> Volver al Inicio</a>
</div>
</body>
</html>
