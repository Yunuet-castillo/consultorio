{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Iniciar Sesi칩n - Hospital San Pedro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="{% static 'citas/img/logo.png' %}">
    <style>
        * { box-sizing: border-box; margin:0; padding:0; font-family: 'Roboto', sans-serif; }
        body { background-color:#EAF2F8; color:#1C1C1C; line-height:1.6; }
        #header { background: linear-gradient(180deg, rgba(46,134,193,0.95) 0%, rgba(46,134,193,1) 100%); color:#fff; padding:15px 30px; height:100px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 8px 24px rgba(0,0,0,0.12); }
        .logo-container { display:flex; align-items:center; }
        .logo { height:80px; margin-right:15px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }
        .logo-placeholder { display:none; width:80px;height:80px;background:#EAF2F8;align-items:center;justify-content:center;margin-right:15px;font-weight:bold;color:#2E86C1;border-radius:5px; }
        .hospital-name { color:white; font-size:22px; font-weight:bold; line-height:1.2; text-transform:uppercase; }
        .logout-btn { background-color:#4A90E2; color:white; border:none; padding:10px 20px; border-radius:30px; font-weight:600; font-size:15px; text-decoration:none; box-shadow:0 6px 14px rgba(74,144,226,0.25); display:flex; align-items:center; transition: all 0.2s ease-in-out; }
        .logout-btn i { margin-right:8px; }
        .logout-btn:hover { background-color:#5DADE2; transform:translateY(-1px); box-shadow:0 10px 18px rgba(93,173,226,0.3); }

        #content { display:flex; min-height:calc(100vh - 100px); flex-direction:column; justify-content:center; align-items:center; }

        .login-form-container { width:100%; max-width:450px; padding:40px; background:#AED6F1; border-radius:14px; box-shadow:0 10px 28px rgba(0,0,0,0.10); border:1px solid rgba(46,134,193,0.35); text-align:center; }
        .login-form-container h2 { color:#1C1C1C; margin-bottom:6px; font-size:26px; font-weight:700; }
        .login-form-container h2 i { color:#4A90E2; margin-right:10px; }
        .login-form-container label { display:block; text-align:left; margin-bottom:6px; font-weight:600; color:#1C1C1C; }
        .login-form-container input { width:100%; padding:12px; border:1px solid rgba(46,134,193,0.55); border-radius:10px; font-size:16px; background-color:#EAF2F8; color:#1C1C1C; transition:border-color 0.15s ease, box-shadow 0.15s ease; }
        .login-form-container input:focus { border-color:#4A90E2; outline:none; box-shadow:0 0 0 0.2rem rgba(74,144,226,0.28); }

        .action-button { text-decoration:none; padding:15px 30px; border-radius:9999px; font-weight:600; font-size:16px; transition: transform 0.12s ease, box-shadow 0.12s ease, background-color 0.12s ease; display:inline-flex; align-items:center; justify-content:center; width:100%; margin-top:10px; border:none; box-shadow:0 8px 18px rgba(74,144,226,0.20); cursor:pointer; background-color:#4A90E2; color:white; }
        .action-button i { margin-right:10px; }
        .action-button:hover { background-color:#5DADE2; transform:translateY(-1px); box-shadow:0 12px 22px rgba(93,173,226,0.25); }

        .role-buttons { display:flex; gap:10px; margin-bottom:14px; }

        .errorlist { list-style:none; padding:0; margin-top:10px; margin-bottom:6px; color:#b00020; text-align:left; font-size:14px; }

        .register-link { display:block; margin-top:20px; font-size:14px; color:#1C1C1C; }
        .register-link a { color:#4A90E2; text-decoration:none; font-weight:bold; }
        .register-link a:hover { text-decoration:underline; }

        .footer { text-align:center; margin-top:40px; padding:20px; border-top:1px solid #2E86C1; color:#1C1C1C; font-size:14px; background:#EAF2F8; border-radius:8px; }
    </style>
</head>
<body>
    <div id="header">
        <div class="logo-container">
            <img src="{% static 'citas/img/logo.png' %}" alt="Logo Hospital San Pedro" class="logo" onerror="this.style.display='none'; document.querySelector('.logo-placeholder').style.display='flex';">
            <div class="logo-placeholder">HSP</div>
            <div class="hospital-name">Hospital<br>San Pedro</div>
        </div>
        <a href="{% url 'inicio' %}" class="logout-btn">
            <i class="fas fa-arrow-left"></i> Salir
        </a>
    </div>

    <div id="content">
        <div class="login-form-container">
            <h2><i class="fas fa-user-lock"></i> Iniciar Sesi칩n</h2>

            <form method="post" autocomplete="off">
                {% csrf_token %}

                {% if messages %}
                    {% for message in messages %}
                        <p style="color:red;">{{ message }}</p>
                    {% endfor %}
                {% endif %}

                <!-- 游댳 Botones de rol -->
                <p>Rol:</p>
                <div class="role-buttons">
                    <button type="button" class="action-button" onclick="setRole('administradora')">
                        <i class="fas fa-user-shield"></i> Administradora
                    </button>
                    <button type="button" class="action-button" onclick="setRole('doctor')">
                        <i class="fas fa-user-md"></i> Doctor
                    </button>
                </div>

                <p>
                    <label for="id_username">Usuario</label>
                    <input type="text" name="username" id="id_username" required>
                </p>

                <p>
                    <label for="id_password">Contrase침a</label>
                    <input type="password" name="password" id="id_password" required>
                </p>

                <input type="hidden" name="role" id="id_role">

                <button type="submit" class="action-button">
                    <i class="fas fa-sign-in-alt"></i> Acceder
                </button>
            </form>

            <div class="register-link">
                쯅o tienes una cuenta? <a href="{% url 'registro' %}">Reg칤strate aqu칤</a>.
            </div>
        </div>
    </div>

    <div class="footer">
        <i class="fas fa-hospital" style="color: #4A90E2; margin-right: 5px;"></i>
        Hospital San Pedro 춸 2025 - Sistema de Citas M칠dicas
    </div>

    <script>
        // 游댳 Funci칩n para rellenar username y role seg칰n el bot칩n
        function setRole(role) {
            const usernameInput = document.getElementById('id_username');
            const roleInput = document.getElementById('id_role');

            roleInput.value = role;

            // Aqu칤 debes mapear los usuarios reales de tu BD para cada rol
            if(role === 'administradora'){
                usernameInput.value = 'Castillo'; // reemplaza con usuario real
            } else if(role === 'doctor'){
                usernameInput.value = 'VictorM'; // reemplaza con usuario real
            }

            // Opcional: enfocar el campo de contrase침a
            document.getElementById('id_password').focus();
        }
    </script>
</body>
</html>
